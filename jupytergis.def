Bootstrap: docker
From: quay.io/galaxy/docker-jupyter-notebook:25.12.1

%environment
    export PATH="/opt/ollama/bin:${PATH}"

%post
    NB_USER=jovyan
    conda install --yes \
        bioblend galaxy-ie-helpers && \
        conda clean --all -y && \
        fix-permissions /opt/conda

    pip install jupytergis==0.13.2

    chown -R $NB_USER:users /home/$NB_USER/ /import /export/ && \
        chmod -R 777 /home/$NB_USER/ /import /export/

%files
    jupyter_notebook_config.py /home/${NB_USER}/.jupyter/jupyter_notebook_config.py
    jupyter_lab_config.py /home/${NB_USER}/.jupyter/jupyter_lab_config.py

%runscript
    exec /startup.sh
